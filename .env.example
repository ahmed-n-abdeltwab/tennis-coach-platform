# =============================================================================
# Tennis Coach Platform - Environment Variables
# =============================================================================
# This file documents all environment variables used by the application.
# Copy this file to .env and fill in your values.
#
# IMPORTANT: Never commit .env files with real credentials to version control!
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database connection URL for PostgreSQL.
# Format: postgresql://<user>:<password>@<host>:<port>/<database>?<options>
#
# PRODUCTION (Render PostgreSQL):
#   Render provides the DATABASE_URL automatically with SSL enabled.
#   The URL format includes sslmode=require for secure connections:
#   DATABASE_URL="postgresql://user:password@host.render.com:5432/dbname?sslmode=require"
#
# PRODUCTION (AWS Lightsail PostgreSQL):
#   Lightsail managed PostgreSQL requires SSL connections.
#   Get the connection details from Lightsail console > Databases > your-db > Connection tab
#
#   Format with SSL (REQUIRED for Lightsail):
#   DATABASE_URL="postgresql://<username>:<password>@<endpoint>:5432/<database>?sslmode=require&connection_limit=5&pool_timeout=2"
#
#   Example:
#   DATABASE_URL="postgresql://dbmasteruser:YourPassword@ls-abc123.xyz.us-east-1.rds.amazonaws.com:5432/tennis_coach?sslmode=require&connection_limit=5&pool_timeout=2"
#
#   LIGHTSAIL SSL REQUIREMENTS:
#   - sslmode=require is MANDATORY for Lightsail PostgreSQL
#   - Lightsail uses AWS RDS under the hood with enforced SSL
#   - Connection will fail without sslmode=require
#   - No additional SSL certificates needed (AWS CA is trusted)
#
#   SSL MODE OPTIONS:
#   - sslmode=require: Encrypts connection, verifies server certificate (RECOMMENDED)
#   - sslmode=verify-full: Also verifies hostname (stricter, may require CA cert)
#
# Connection Pool Options:
#   connection_limit: Maximum active connections (recommended: num_cpus * 2 + 1)
#   pool_timeout: Seconds to wait for a connection (default: 10)
#
DATABASE_URL="postgresql://postgres:password@localhost:5432/tennis_coach_dev?connection_limit=5&pool_timeout=2"

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================

# JWT_SECRET: Secret key for signing access tokens
# REQUIREMENTS:
#   - Minimum 32 characters
#   - Use cryptographically secure random string
#   - MUST be different in production than development
#
# Generate a secure secret:
#   openssl rand -base64 32
#
# PRODUCTION: Set this in Render dashboard environment variables
#   Render can auto-generate secrets using generateValue: true in render.yaml
#
JWT_SECRET="your-super-secure-jwt-secret-key-change-in-production"

# JWT_EXPIRES_IN: Access token expiration time
# Format: number + unit (s=seconds, m=minutes, h=hours, d=days)
# PRODUCTION: Consider shorter expiration (e.g., "15m" or "1h") for security
#
JWT_EXPIRES_IN="24h"

# JWT_REFRESH_SECRET: Separate secret key for refresh tokens
# REQUIREMENTS:
#   - Minimum 32 characters
#   - MUST be different from JWT_SECRET
#   - Use cryptographically secure random string
#
# Generate a secure secret:
#   openssl rand -base64 32
#
# PRODUCTION: Set this in Render dashboard environment variables
#
JWT_REFRESH_SECRET="your-super-secure-jwt-refresh-secret-key-change-in-production"

# JWT_REFRESH_EXPIRES_IN: Refresh token expiration time
# Typically longer than access token expiration
#
JWT_REFRESH_EXPIRES_IN="7d"

# =============================================================================
# PAYPAL INTEGRATION
# =============================================================================

# PayPal API credentials for payment processing
# Get credentials from: https://developer.paypal.com/dashboard/applications
#
# PAYPAL_ENVIRONMENT:
#   - "sandbox" for development/testing
#   - "live" for production (PRODUCTION ONLY)
#
# PRODUCTION: Use live credentials and set PAYPAL_ENVIRONMENT="live"
#
PAYPAL_CLIENT_ID="your-paypal-client-id"
PAYPAL_CLIENT_SECRET="your-paypal-client-secret"
PAYPAL_ENVIRONMENT="sandbox"

# =============================================================================
# GOOGLE CALENDAR INTEGRATION
# =============================================================================

# Google OAuth credentials for Calendar integration
# Get credentials from: https://console.cloud.google.com/apis/credentials
#
# GOOGLE_REDIRECT_URI:
#   - Development: http://localhost:3333/auth/google/callback
#   - Production: https://your-api-domain.onrender.com/auth/google/callback
#
# PRODUCTION: Update GOOGLE_REDIRECT_URI to your Render API URL
#   and add it to authorized redirect URIs in Google Cloud Console
#
GOOGLE_CLIENT_ID="your-google-oauth-client-id"
GOOGLE_CLIENT_SECRET="your-google-oauth-client-secret"
GOOGLE_REDIRECT_URI="http://localhost:3333/auth/google/callback"

# =============================================================================
# EMAIL CONFIGURATION (Nodemailer)
# =============================================================================

# SMTP configuration for sending emails
# Configure based on your email service provider
#
# PRODUCTION: Use a production email service (SendGrid, Mailgun, AWS SES, etc.)
#
SMTP_SENDER_EMAIL="<SENDER@YOURDOMAIN.COM>"
SMTP_TOKEN="<YOUR-TOKEN-HERE>"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# PORT: The port the API server listens on
# PRODUCTION: Render sets this automatically, no need to configure
#
PORT=3333

# FRONTEND_URL: The URL of the frontend application
# Used for CORS configuration and email links
#
# DEVELOPMENT: http://localhost:4200
# PRODUCTION: Your Cloudflare Pages URL (e.g., https://your-app.pages.dev)
#
# IMPORTANT: This MUST match your deployed frontend URL for CORS to work
#
FRONTEND_URL="http://localhost:4200"

# =============================================================================
# AWS LIGHTSAIL CONTAINER SERVICE CONFIGURATION
# =============================================================================
# These settings are specific to AWS Lightsail container deployments.
# Set these in the Lightsail console under Container Services > your-service > Deployment

# LIGHTSAIL_SERVICE_NAME: Name of your Lightsail container service
# Used by deployment scripts to identify the target service
# Example: tennis-coach-api
#
# LIGHTSAIL_SERVICE_NAME="tennis-coach-api"

# LIGHTSAIL_REGION: AWS region for your Lightsail resources
# Must match where you created your container service and database
# Example: us-east-1, us-west-2, eu-west-1
#
# LIGHTSAIL_REGION="us-east-1"

# =============================================================================
# LIGHTSAIL CONTAINER ENVIRONMENT VARIABLES
# =============================================================================
# When deploying to Lightsail Container Service, set these environment variables
# in the Lightsail console or via AWS CLI deployment:
#
# REQUIRED for Lightsail Container:
#   - NODE_ENV=production
#   - PORT=3333
#   - DATABASE_URL=<your-lightsail-postgresql-connection-string-with-ssl>
#   - JWT_SECRET=<secure-random-string-32-chars-min>
#   - JWT_REFRESH_SECRET=<different-secure-random-string-32-chars-min>
#   - FRONTEND_URL=<your-cloudflare-pages-url>
#
# OPTIONAL (for full functionality):
#   - JWT_EXPIRES_IN=24h
#   - JWT_REFRESH_EXPIRES_IN=7d
#   - PAYPAL_CLIENT_ID=<your-paypal-client-id>
#   - PAYPAL_CLIENT_SECRET=<your-paypal-client-secret>
#   - PAYPAL_ENVIRONMENT=live
#   - GOOGLE_CLIENT_ID=<your-google-oauth-client-id>
#   - GOOGLE_CLIENT_SECRET=<your-google-oauth-client-secret>
#   - GOOGLE_REDIRECT_URI=https://<your-lightsail-service>.region.cs.amazonlightsail.com/auth/google/callback
#   - SMTP_SENDER_EMAIL=<your-sender-email>
#   - SMTP_TOKEN=<your-smtp-token>
#
# LIGHTSAIL PUBLIC ENDPOINT URL FORMAT:
#   https://<service-name>.<random-id>.<region>.cs.amazonlightsail.com
#   Example: https://tennis-coach-api.abc123xyz.us-east-1.cs.amazonlightsail.com

# NODE_ENV: Application environment
# Values: "development", "production", "test"
#
# PRODUCTION: Set to "production" in Render dashboard
#   This enables production optimizations and security features
#
NODE_ENV="development"

# =============================================================================
# FRONTEND ENVIRONMENT VARIABLES (Vite)
# =============================================================================
# These variables are used at BUILD TIME for the frontend application.
# They must be prefixed with VITE_ to be exposed to the frontend code.
#
# Set these in Cloudflare Pages dashboard under Settings > Environment Variables

# VITE_API_URL: The URL of the backend API
# Used by the frontend to make API requests
#
# DEVELOPMENT: http://localhost:3333
# PRODUCTION (Render): Your Render API URL (e.g., https://tennis-coach-api.onrender.com)
# PRODUCTION (Lightsail): Your Lightsail container public endpoint
#   Format: https://<service-name>.<random-id>.<region>.cs.amazonlightsail.com
#   Example: https://tennis-coach-api.abc123xyz.us-east-1.cs.amazonlightsail.com
#
# IMPORTANT: Do NOT include trailing slash
#
# Example for Cloudflare Pages with Lightsail backend:
#   Variable name: VITE_API_URL
#   Value: https://tennis-coach-api.abc123xyz.us-east-1.cs.amazonlightsail.com
#
VITE_API_URL="http://localhost:3333"

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#
# Backend (Render):
#   [ ] DATABASE_URL is set (auto-configured if using Render PostgreSQL)
#   [ ] JWT_SECRET is set to a unique, secure value
#   [ ] JWT_REFRESH_SECRET is set to a different unique, secure value
#   [ ] FRONTEND_URL points to your Cloudflare Pages URL
#   [ ] NODE_ENV is set to "production"
#   [ ] PAYPAL_ENVIRONMENT is set to "live" (if using payments)
#   [ ] GOOGLE_REDIRECT_URI points to your Render API URL
#
# Backend (AWS Lightsail Container Service):
#   [ ] Container service created with Nano power (512MB RAM, 0.25 vCPU)
#   [ ] DATABASE_URL is set with sslmode=require for Lightsail PostgreSQL
#   [ ] JWT_SECRET is set to a unique, secure value (32+ chars)
#   [ ] JWT_REFRESH_SECRET is set to a different unique, secure value (32+ chars)
#   [ ] FRONTEND_URL points to your Cloudflare Pages URL
#   [ ] NODE_ENV is set to "production"
#   [ ] PORT is set to 3333
#   [ ] Health check configured at /api/health
#   [ ] PAYPAL_ENVIRONMENT is set to "live" (if using payments)
#   [ ] GOOGLE_REDIRECT_URI points to your Lightsail public endpoint
#
# Database (AWS Lightsail PostgreSQL):
#   [ ] Database instance created (db.t3.micro for free tier)
#   [ ] Public mode disabled (VPC only access)
#   [ ] Connection string includes sslmode=require
#   [ ] Automatic backups enabled (7-day retention)
#
# Frontend (Cloudflare Pages):
#   [ ] VITE_API_URL points to your backend URL (Render or Lightsail)
#   [ ] Build command: pnpm install && pnpm build:web
#   [ ] Output directory: dist/apps/web
#   [ ] _redirects file present for SPA routing
#
# See docs/DEPLOYMENT.md for detailed deployment instructions.
# =============================================================================
